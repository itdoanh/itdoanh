<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#fff7e6"/>
  <title>Thi·ªáp 19/10 ‚Äî Nguy·ªÖn Th·ªã Lan</title>

  <!-- Fonts & CDNs -->
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;600;800&family=Dancing+Script:wght@600;700&display=swap&subset=vietnamese" rel="stylesheet">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root{ --gold:#f7c948; --sun:#ffc400; --white:#fff; --ink:#2b2b2b; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:'Be Vietnam Pro',system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--ink); background:#fff7e6}

    /* Trang khung: cƒÉn gi·ªØa th·∫≠t tr√™n mobile */
    .page{
      position:fixed; inset:0; width:100vw; height:100svh; min-height:100dvh;
      display:grid; place-items:center;
      padding:env(safe-area-inset-top) 16px env(safe-area-inset-bottom) 16px;
      transition:opacity .6s ease, transform .6s ease;
      opacity:0; pointer-events:none; transform:translateY(30px);
    }
    .page.active{opacity:1; pointer-events:auto; transform:none}

    /* Trang 1: Sinh nh·∫≠t */
    .birthday{
      background:
        radial-gradient(1600px 900px at 50% -10%, #fff8d9 0%, #fff2bf 40%, #fff7e6 70%, #fffdf7 100%),
        url('https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f33b.svg') 0 0/90px 90px repeat;
    }
    .content{
      width:min(700px, 92vw); position:relative; z-index:1;
      display:flex; flex-direction:column; align-items:center; gap:18px; text-align:center;
      padding:26px 18px 30px; border-radius:26px;
      background:linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.82));
      border:1px solid rgba(0,0,0,.06); box-shadow:0 20px 60px rgba(0,0,0,.12);
    }
    .content:before{
      content:""; position:absolute; inset:-10px; border-radius:30px; pointer-events:none;
      background:
        radial-gradient(16px 16px at 20px 20px, rgba(0,0,0,.06), transparent 60%) repeat,
        conic-gradient(from 0deg, rgba(0,0,0,.06) 0 20deg, transparent 20deg 40deg, rgba(0,0,0,.06) 40deg 60deg, transparent 60deg 80deg, rgba(0,0,0,.06) 80deg 100deg, transparent 100deg 120deg, rgba(0,0,0,.06) 120deg 140deg, transparent 140deg 160deg, rgba(0,0,0,.06) 160deg 180deg) 0/26px 26px;
      -webkit-mask-composite:xor; mask-composite:exclude; padding:10px; opacity:.22;
    }

    /* ===== 19/10: CH·ªÆ + V√íNG HOA TR√íN ƒê·ªÄU ===== */
    .sun-date{ display:flex; align-items:center; justify-content:center; z-index:1 }
    .date-wrap{ position:relative; display:inline-grid; place-items:center; padding:6px 8px }
    .date-text{
      font-weight:800; font-size:clamp(32px, 11vw, 56px);
      letter-spacing:.04em; line-height:1;
      background: linear-gradient(180deg,#b07a00 0%, #ffc93a 40%, #ffde82 65%, #b07a00 100%);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow: 0 1px 0 rgba(0,0,0,.08);
      padding:4px 8px;
    }
    .flower-ring{ position:absolute; inset:0; pointer-events:none }
    .flower-ring .fl{
      position:absolute; top:50%; left:50%;
      width:24px; height:24px;               /* k√≠ch th∆∞·ªõc ƒë·ªìng ƒë·ªÅu */
      transform: translate(-50%,-50%) rotate(var(--a)) translate(var(--r)) rotate(calc(-1*var(--a)));
      filter: drop-shadow(0 2px 4px rgba(0,0,0,.22));
      animation: ringFloat 7s ease-in-out infinite;
      animation-delay: var(--delay);
    }
    .flower-ring .fl img{ width:100%; height:100%; object-fit:contain }
    @keyframes ringFloat{
      0%,100%{ transform: translate(-50%,-50%) rotate(var(--a)) translate(var(--r)) rotate(calc(-1*var(--a))); }
      50%{    transform: translate(-50%,-50%) rotate(var(--a)) translate(calc(var(--r) + 3px)) rotate(calc(-1*var(--a))); }
    }

    /* T√™n */
    .name-wrap{ width:100%; position:relative }
    .name-svg{ width:100%; height:16dvh }
    .name-text{ font-family:'Dancing Script',cursive; font-weight:700; font-size:clamp(40px,11vw,80px); fill:url(#nameGradientLight); filter: drop-shadow(0 2px 4px rgba(0,0,0,.12)) }

    /* L·ªùi ch√∫c */
    .blurb{ color:#2b2b2b; font-size:clamp(14px,3.8vw,18px); line-height:1.7; background:rgba(255,255,255,.98);
      border:1px solid rgba(0,0,0,.06); padding:14px 16px; border-radius:14px; backdrop-filter: blur(4px) saturate(120%); position:relative }
    .blurb .sticker{ position:absolute; width:28px; height:28px; filter:drop-shadow(0 3px 6px rgba(0,0,0,.25)); opacity:.95 }
    .blurb .s1{ left:-8px; top:-10px } .blurb .s2{ right:-10px; top:-12px } .blurb .s3{ left:-12px; bottom:-12px } .blurb .s4{ right:-14px; bottom:-10px }

    /* M≈©i t√™n */
    .up-arrow,.down-arrow{
      position:fixed; width:52px; height:52px; border-radius:50%; border:1px solid rgba(0,0,0,.15);
      background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.75));
      display:grid; place-items:center; cursor:pointer; color:#333; box-shadow:0 8px 20px rgba(0,0,0,.2); z-index:5; user-select:none
    }
    .up-arrow{ right:14px; bottom:calc(12px + env(safe-area-inset-bottom)); animation:pulse 1.6s ease-in-out infinite }
    .down-arrow{ left:14px; bottom:calc(12px + env(safe-area-inset-bottom)) }
    @keyframes pulse{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-6px) }}

    /* L·ªõp hi·ªáu ·ª©ng n·ªÅn P1 */
    #sunfield{ position:absolute; inset:0; overflow:hidden; pointer-events:none; z-index:0 }
    .floating-sun{ position:absolute; top:100vh; left:0; font-size:18px; opacity:.85; pointer-events:none; animation: drift var(--t,18s) linear infinite; will-change: transform }
    @keyframes drift{ from{ transform: translateY(0) translateX(var(--x,0)) rotate(0) } to{ transform: translateY(-110vh) translateX(calc(var(--x,0) + 40px)) rotate(360deg) } }

    /* Trang 2 */
    .love{ position:relative; overflow:hidden; color:#2b2b2b; background: radial-gradient(1200px 900px at 50% -10%, #ffffff24, transparent 60%), linear-gradient(180deg, #edf7ff, #fff7fb 45%, #fff4e1 100%) }
    .love .card{ width:min(680px, 92vw); text-align:center; padding:18px; position:relative }

    /* Th∆° l·ª•c b√°t: cƒÉn gi·ªØa ƒë∆°n gi·∫£n */
    .poem{ font-size:clamp(16px, 4.4vw, 22px); line-height:1.9; background:rgba(255,255,255,.92);
      border:1px solid rgba(0,0,0,.06); border-radius:14px; padding:18px; box-shadow:0 16px 34px rgba(0,0,0,.09);
      text-align:center }
    .stanza{ margin:10px 0 14px }
    .stanza p{ margin:6px 0 }

    .poem-frame{ position:absolute; inset:-12px; pointer-events:none }
    .poem-frame img{ position:absolute; width:64px; filter: drop-shadow(0 6px 14px rgba(0,0,0,.18)); animation: floaty 6s ease-in-out infinite }
    .pf-tl{ left:-4px; top:-6px } .pf-tr{ right:-4px; top:-6px; animation-delay:.8s }
    .pf-bl{ left:-6px; bottom:-6px; animation-delay:1.2s } .pf-br{ right:-6px; bottom:-6px; animation-delay:1.6s }
    @keyframes floaty{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-8px) }}
    .signature{ position:fixed; right:12px; bottom:calc(10px + env(safe-area-inset-bottom)); font-weight:700; color:#444; text-shadow:0 1px 0 #fff; z-index:3 }

    /* Trang 2: hi·ªáu ·ª©ng xu√¢n */
    .spark{ position:fixed; bottom:-10vh; width:10px; height:10px; border-radius:50%; opacity:.8; pointer-events:none;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.95), rgba(255,255,255,.35) 60%, rgba(255,255,255,0) 70%);
      box-shadow:0 0 20px rgba(255,255,255,.6); animation: rise var(--t,14s) linear forwards; filter: blur(.5px) }
    @keyframes rise{ to{ transform: translateY(-115vh) translateX(var(--x,0)) }}
    .bf{ position:fixed; top:20vh; left:-10vw; width:28px; height:28px; pointer-events:none; animation: fly var(--d,22s) linear infinite; filter: drop-shadow(0 4px 8px rgba(0,0,0,.18)) }
    .bf img{ width:100%; height:100%; object-fit:contain; animation: flap 1s ease-in-out infinite }
    @keyframes fly{ from{ transform:translateX(-20vw) } to{ transform:translateX(120vw) } }
    @keyframes flap{ 0%,100%{ transform:rotate(-8deg)} 50%{ transform:rotate(8deg)} }

    /* M√†n h√¨nh kh√≥a */
    .lock{ position:fixed; inset:0; display:grid; place-items:center; background:linear-gradient(180deg, #0b0f14 10%, #0b0f14ee 70%, #091017f5 100%); z-index:999; transition: opacity .4s ease; color:#fff }
    .lock.hidden{ opacity:0; pointer-events:none }
    .panel{ width:min(480px, 92vw); background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)); border:1px solid rgba(255,255,255,.18); padding:20px 18px 28px; border-radius:16px; text-align:center; backdrop-filter: blur(10px); box-shadow:0 20px 50px rgba(0,0,0,.45); position:relative }
    .panel h1{ margin:0 0 4px; font-weight:800; letter-spacing:.5px } .panel p{ opacity:.8; margin:0 0 12px }
    .panel input{ width:220px; font-size:22px; text-align:center; letter-spacing:3px; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.2); background:rgba(255,255,255,.08); color:#fff; outline:none }
    .panel button{ margin-top:12px; padding:10px 16px; font-weight:700; border-radius:12px; border:1px solid rgba(255,255,255,.25); background:linear-gradient(180deg, #ffd86a, #f7c948); color:#442; cursor:pointer; box-shadow:0 8px 18px rgba(247,201,72,.3) }
    .shake{ animation:shake .35s ease }
    @keyframes shake{ 10%,90%{ transform: translateX(-2px) } 20%,80%{ transform: translateX(4px) } 30%,50%,70%{ transform: translateX(-8px) } 40%,60%{ transform: translateX(8px) } }
    .panel .lock-corner{ position:absolute; width:40px; height:40px; filter:drop-shadow(0 3px 8px rgba(0,0,0,.45)); opacity:.95 }
    .lc-tl{ left:-14px; top:-14px } .lc-tr{ right:-14px; top:-14px } .lc-bl{ left:-14px; bottom:-14px } .lc-br{ right:-14px; bottom:-14px }

    @media (prefers-reduced-motion:reduce){ *{animation:none!important; transition:none!important} }
  </style>
</head>
<body>

  <!-- LOCK -->
  <div id="lock" class="lock">
    <div class="panel" id="lockPanel">
      <img class="lock-corner lc-tl" alt="üåª" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f33b.svg">
      <img class="lock-corner lc-tr" alt="üéÅ" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f381.svg">
      <img class="lock-corner lc-bl" alt="üéÇ" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f382.svg">
      <img class="lock-corner lc-br" alt="üéà" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f388.svg">
      <h1>üîí M·∫≠t kh·∫©u v√†o thi·ªáp</h1>
      <p>Nh·∫≠p m·∫≠t kh·∫©u: <strong>1910</strong></p>
      <input id="pwd" inputmode="numeric" pattern="[0-9]*" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
      <div><button id="unlockBtn">M·ªû THI·ªÜP</button></div>
    </div>
  </div>

  <!-- TRANG 1 -->
  <section id="page1" class="page birthday active">
    <div id="sunfield"></div>

    <div class="content" data-aos="zoom-in">
      <div class="sun-date" id="sunDate" aria-label="19/10"></div>

      <div class="name-wrap" data-aos="fade-up" data-aos-delay="150">
        <svg class="name-svg" viewBox="0 0 1200 220" preserveAspectRatio="xMidYMid meet" aria-label="Nguy·ªÖn Th·ªã Lan">
          <defs>
            <linearGradient id="nameGradientLight" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0%" stop-color="#d08c00"/><stop offset="60%" stop-color="#ffb300"/><stop offset="100%" stop-color="#ffcf47"/>
            </linearGradient>
            <linearGradient id="swashGradient" x1="0" x2="1" y1="0" y2="0">
              <stop offset="0%" stop-color="#ffd66e"/><stop offset="100%" stop-color="#ffa000"/>
            </linearGradient>
            <filter id="glow" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur stdDeviation="2.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>
          <text x="50%" y="120" text-anchor="middle" class="name-text" filter="url(#glow)">Nguy·ªÖn Th·ªã Lan</text>
          <path d="M260 150 Q600 210 940 150" fill="none" stroke="url(#swashGradient)" stroke-width="4" stroke-linecap="round" opacity=".5"/>
        </svg>
      </div>

      <p class="blurb" data-aos="fade-up" data-aos-delay="250">
        <img class="sticker s1" alt="üåª" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f33b.svg"/>
        <img class="sticker s2" alt="üéâ" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f389.svg"/>
        <img class="sticker s3" alt="üéÅ" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f381.svg"/>
        <img class="sticker s4" alt="üéÇ" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f382.svg"/>
        Ch√∫c Lan m·ªôt ng√†y sinh nh·∫≠t ƒë√≥n tu·ªïi m·ªõi ng·∫≠p tr√†n n·∫Øng ·∫•m nh∆∞ nh·ªØng b√¥ng h∆∞·ªõng d∆∞∆°ng nh·ªè. Mong m·ªçi ∆∞·ªõc m∆° d·ªãu d√†ng ƒë·ªÅu n·∫£y m·∫ßm, c√¥ng vi·ªác su√¥n s·∫ª, n·ª• c∆∞·ªùi lu√¥n r·ª±c r·ª°. Ch√∫c em b√¨nh an, m·∫°nh kh·ªèe v√† h·∫°nh ph√∫cüåªüéâ.
      </p>
      <p style="font-size:10px;">b√™n d∆∞·ªõi v·∫´n c√≤n n·ªØa nheee</p>
    </div>
    
    <button class="up-arrow" id="toLove" aria-label="Sang trang t·ªè t√¨nh">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5"/><path d="m5 12 7-7 7 7"/></svg>
    </button>
  </section>

  <!-- TRANG 2 -->
  <section id="page2" class="page love">
    <div class="card" data-aos="zoom-in">
      <div class="poem-frame">
        <img class="pf-tl" alt="mai" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f33b.svg"/>
        <img class="pf-tr" alt="ƒë√†o" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f338.svg"/>
        <img class="pf-bl" alt="ph√°o hoa" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f387.svg"/>
        <img class="pf-br" alt="m·∫ßm xu√¢n" src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f331.svg"/>
      </div>

      
      <div class="poem" id="poem">
        <div class="stanza">
          <p>Khi hoa ƒë√†o n·ªü ven ƒë√™,</p>
          <p>Tr·ªùi xanh h√© n·∫Øng v·ªó v·ªÅ c·ªè non.</p>
          <p>Gi√≥ bay h·ªù h·ªØng m√πi h∆∞∆°ng,</p>
          <p>Em nh∆∞ n·ª• th·∫Øm gi·ªØa v∆∞·ªùn xu√¢n x∆∞a.</p>
        </div>
        <div class="stanza">
          <p>Khi chim √©n r·ª£p giƒÉng tr·ªùi,</p>
          <p>S√¥ng g∆∞∆°ng in b√≥ng ƒë√¥i ng∆∞·ªùi t√¨m nhau.</p>
          <p>Anh v·ªÅ c√πng √°nh trƒÉng th√¢u,</p>
          <p>Xin em m·ªü c·ª≠a nhi·ªám m·∫ßu con tim.</p>
        </div>
        <div class="stanza">
          <p>Khi m√¢y tr·∫Øng l·ªØng l·ªù tr√¥i,</p>
          <p>C·ªè hoa r·∫°ng r·ª°, ƒë·∫•t tr·ªùi ƒë·ªïi thay.</p>
          <p>Anh mang h∆°i th·ªü xu√¢n n√†y,</p>
          <p>ƒê·∫øn xin gi·ªØ l·∫•y b√†n tay em hi·ªÅn.</p>
        </div>
      </div>
    </div>

    <div class="signature">ƒêo√†n VƒÉn Doanh</div>
    <button class="down-arrow" id="toBirthday" aria-label="Quay l·∫°i trang sinh nh·∫≠t">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14"/><path d="m19 12-7 7-7-7"/></svg>
    </button>
  </section>

  <script>
    const $ = s => document.querySelector(s);

    /* ===== 19/10 (ch·ªØ + v√≤ng hoa tr√≤n ƒë·ªÅu) ===== */
    function buildFlowerRing(container){
      const ring = document.createElement('div');
      ring.className = 'flower-ring';

      const textEl = container.querySelector('.date-text');
      const rect = textEl.getBoundingClientRect();
      const r = Math.sqrt(rect.width*rect.width + rect.height*rect.height)/2 + 16; // b√°n k√≠nh c·ªë ƒë·ªãnh
      const N = 28; // s·ªë b√¥ng, chia ƒë·ªÅu 360¬∞

      for(let i=0;i<N;i++){
        const el = document.createElement('span'); el.className='fl';
        const img = document.createElement('img');
        img.alt='üåª'; img.src='https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f33b.svg';
        const angle = (360/N)*i;
        el.style.setProperty('--a', angle + 'deg');
        el.style.setProperty('--r', r + 'px');
        el.style.setProperty('--delay', (i%6)*0.15 + 's'); // nh·ªãp nh·∫π, kh√¥ng l·ªách h√¨nh
        el.appendChild(img);
        ring.appendChild(el);
      }
      return ring;
    }
    function renderDate(){
      const holder = $('#sunDate'); holder.innerHTML='';
      const wrap = document.createElement('div'); wrap.className='date-wrap';
      const text = document.createElement('div'); text.className='date-text'; text.textContent='19/10';
      wrap.appendChild(text);
      requestAnimationFrame(()=> wrap.appendChild(buildFlowerRing(wrap)));
      holder.appendChild(wrap);
    }

    /* ===== n·ªÅn hoa bay P1 ===== */
    function sprinkleSuns(){
      const field = $('#sunfield'); field.innerHTML='';
      for(let i=0;i<14;i++){
        const span = document.createElement('span');
        span.className='floating-sun'; span.textContent='üåª';
        span.style.left = Math.random()*100 + 'vw';
        span.style.setProperty('--x', (Math.random()*60-30) + 'px');
        span.style.setProperty('--t', (12 + Math.random()*10) + 's');
        span.style.animationDelay = (-Math.random()*24)+'s';
        field.appendChild(span);
      }
    }

    /* ===== hi·ªáu ·ª©ng xu√¢n trang 2 ===== */
    let springTimer=null, springTimer2=null;
    function startSpringFX(){
      springTimer = setInterval(()=>{
        const s = document.createElement('div'); s.className='spark';
        s.style.left = (Math.random()*100) + 'vw';
        s.style.setProperty('--t', (10 + Math.random()*12)+'s');
        s.style.setProperty('--x', (Math.random()*80 - 40)+'px');
        document.body.appendChild(s);
        setTimeout(()=> s.remove(), 24000);
      }, 480);
      const addButterfly = ()=>{
        const b = document.createElement('div'); b.className='bf';
        b.style.top = (20 + Math.random()*50) + 'vh';
        b.style.setProperty('--d', (18 + Math.random()*10)+'s');
        const img = document.createElement('img'); img.alt='ü¶ã'; img.src='https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f98b.svg'; b.appendChild(img);
        document.body.appendChild(b);
        setTimeout(()=> b.remove(), 26000);
      };
      for(let i=0;i<3;i++) setTimeout(addButterfly, i*1400);
      springTimer2 = setInterval(addButterfly, 7500);
    }
    function stopSpringFX(){
      if(springTimer){ clearInterval(springTimer); springTimer=null; }
      if(springTimer2){ clearInterval(springTimer2); springTimer2=null; }
      document.querySelectorAll('.spark,.bf').forEach(e=>e.remove());
    }

    /* ===== ƒëi·ªÅu h∆∞·ªõng ===== */
    function goToLove(){
      if($('#page2').classList.contains('active')) return;
      $('#page1').classList.remove('active');
      $('#page2').classList.add('active');
      startSpringFX();
      if (window.gsap) gsap.from('.love .card', {y:30, opacity:0, duration:.8, ease:'power2.out'});
    }
    function goToBirthday(){
      if($('#page1').classList.contains('active')) return;
      $('#page2').classList.remove('active');
      $('#page1').classList.add('active');
      stopSpringFX();
      if (window.gsap) gsap.from('#page1 .content', {y:20, opacity:0, duration:.6});
    }

    /* ===== kh√≥a m·∫≠t kh·∫©u ===== */
    function tryUnlock(){
      const ok = ($('#pwd').value || '').trim() === '1910';
      if(ok){
        $('#lock').classList.add('hidden');
        setTimeout(()=>$('#lock')?.remove(), 400);
        try{
          const shoot = () => window.confetti && confetti({ particleCount: 90, spread: 70, origin:{ y: .85 } });
          shoot(); setTimeout(shoot, 220); setTimeout(shoot, 520);
        }catch(e){}
      }else{
        const p = $('#lockPanel'); p.classList.remove('shake'); void p.offsetWidth; p.classList.add('shake');
      }
    }

    /* ===== kh·ªüi t·∫°o ===== */
    document.addEventListener('DOMContentLoaded', ()=>{
      renderDate(); sprinkleSuns();
      if (window.AOS) AOS.init({ once:true, duration:700, offset:20 });

      $('#toLove').addEventListener('click', goToLove);
      $('#toBirthday').addEventListener('click', goToBirthday);

      let y1=null; $('#page1').addEventListener('touchstart',e=>y1=e.touches[0].clientY,{passive:true});
      $('#page1').addEventListener('touchend',e=>{ if(y1!=null && (e.changedTouches[0].clientY - y1) < -30) goToLove(); y1=null; },{passive:true});
      $('#page1').addEventListener('wheel',e=>{ if(e.deltaY<0) goToLove(); },{passive:true});

      let y2=null; $('#page2').addEventListener('touchstart',e=>y2=e.touches[0].clientY,{passive:true});
      $('#page2').addEventListener('touchend',e=>{ if(y2!=null && (e.changedTouches[0].clientY - y2) > 30) goToBirthday(); y2=null; },{passive:true});
      $('#page2').addEventListener('wheel',e=>{ if(e.deltaY>0) goToBirthday(); },{passive:true});

      $('#unlockBtn').addEventListener('click', tryUnlock);
      $('#pwd').addEventListener('keydown', e=>{ if(e.key==='Enter') tryUnlock(); });
    });
  </script>
</body>
</html>